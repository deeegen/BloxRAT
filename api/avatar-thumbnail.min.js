// @ts-nocheck
export default async function handler(t,e){const{userId:r,type:s="avatar",isCircular:a=!1,size:o=420,format:n="Png",responseType:i="image"}=t.query;if(!r)return e.redirect(302,"https://github.com/kckarnige/BloxRatP");const c=`https://thumbnails.roblox.com/v1/users/${s}?userIds=${r}&size=${o}x${o}&format=${n}&isCircular=${a}`;try{const t=await fetch(c),r=await t.json(),s=r?.data?.[0];if(!s||!s.imageUrl)return e.status(404).json({error:"Data not found"});if("image"==i){const t=await fetch(s.imageUrl),r=t.headers.get("content-type"),a=await t.arrayBuffer();e.setHeader("Content-Type",r),e.setHeader("Access-Control-Allow-Origin","*"),e.status(200).send(Buffer.from(a))}else"json"==i?(e.setHeader("Access-Control-Allow-Origin","*"),e.status(200).json({data:s})):e.status(400).json({error:"Invalid response type"})}catch(t){e.status(500).json({error:"Failed to fetch from Roblox"})}}